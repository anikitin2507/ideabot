# üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–∞ Telegram Bot

## ‚ùå –ü—Ä–æ–±–ª–µ–º–∞
```
TelegramConflictError: Conflict: terminated by other getUpdates request; 
make sure that only one bot instance is running
```

## üö® –ü—Ä–∏—á–∏–Ω–∞
–ó–∞–ø—É—â–µ–Ω–æ –Ω–µ—Å–∫–æ–ª—å–∫–æ —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–≤ –±–æ—Ç–∞ —Å –æ–¥–Ω–∏–º —Ç–æ–∫–µ–Ω–æ–º –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ

## ‚úÖ –ë—ã—Å—Ç—Ä–æ–µ —Ä–µ—à–µ–Ω–∏–µ (30 —Å–µ–∫—É–Ω–¥)

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –≤ Railway
1. –û—Ç–∫—Ä–æ–π—Ç–µ [Railway Dashboard](https://railway.app/dashboard)
2. –ù–∞–π–¥–∏—Ç–µ –≤–∞—à –ø—Ä–æ–µ–∫—Ç `ideabot`
3. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **Deployments** 
4. –ù–∞–∂–º–∏—Ç–µ **"Stop Deployment"** –Ω–∞ –∞–∫—Ç–∏–≤–Ω–æ–º –¥–µ–ø–ª–æ–µ
5. –ü–æ–¥–æ–∂–¥–∏—Ç–µ 10 —Å–µ–∫—É–Ω–¥
6. –ù–∞–∂–º–∏—Ç–µ **"Redeploy"**

### –í–∞—Ä–∏–∞–Ω—Ç 2: Webhook —Ä–µ–∂–∏–º (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π) üî•
**–ü–æ–ª–Ω–æ—Å—Ç—å—é –∏–∑–±–µ–≥–∞–µ—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤!**

1. –í Railway ‚Üí **Variables** –¥–æ–±–∞–≤—å—Ç–µ:
   ```
   USE_WEBHOOK=true
   WEBHOOK_URL=https://YOUR-RAILWAY-DOMAIN.railway.app
   ```
2. –ó–∞–º–µ–Ω–∏—Ç–µ `YOUR-RAILWAY-DOMAIN` –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–π –¥–æ–º–µ–Ω Railway
3. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–µ–¥–µ–ø–ª–æ–π —Ä–µ—à–∏—Ç –ø—Ä–æ–±–ª–µ–º—É –Ω–∞–≤—Å–µ–≥–¥–∞

### –í–∞—Ä–∏–∞–Ω—Ç 3: –ß–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
1. –í Railway ‚Üí **Variables** 
2. –î–æ–±–∞–≤—å—Ç–µ –≤—Ä–µ–º–µ–Ω–Ω—É—é –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é: `FORCE_RESTART=true`
3. –î–æ–∂–¥–∏—Ç–µ—Å—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —Ä–µ–¥–µ–ø–ª–æ—è
4. –£–¥–∞–ª–∏—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é `FORCE_RESTART`

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ —á—Ç–æ –±–æ—Ç –±–æ–ª—å—à–µ –Ω–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç—É–µ—Ç

–ü–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ –≤ –ª–æ–≥–∞—Ö Railway –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å:
```
‚úÖ Bot authenticated username=your_bot_name id=123456789
‚úÖ Cleared webhook and pending updates  
‚úÖ Starting bot polling attempt=1
‚úÖ Health check server started on port 8000
```

**–ù–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å:**
```
‚ùå Failed to fetch updates - TelegramConflictError
‚ùå Sleep for X seconds and try again
```

## üõ†Ô∏è –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —É–ª—É—á—à–µ–Ω–∏—è

–ö–æ–¥ —Ç–µ–ø–µ—Ä—å —É–º–µ–µ—Ç:
- ‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—á–∏—â–∞—Ç—å** —Å—Ç–∞—Ä—ã–µ webhook –∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
- ‚úÖ **–ü–æ–≤—Ç–æ—Ä—è—Ç—å –ø–æ–ø—ã—Ç–∫–∏** –ø—Ä–∏ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–∞—Ö (–¥–æ 5 —Ä–∞–∑)
- ‚úÖ **Graceful shutdown** –ø—Ä–∏ –æ—Å—Ç–∞–Ω–æ–≤–∫–µ
- ‚úÖ **–î–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π

## üöÄ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

1. **–õ–æ–≥–∏:** Railway Dashboard ‚Üí Deployments ‚Üí View Logs
   - –î–æ–ª–∂–µ–Ω –±—ã—Ç—å –∑–µ–ª–µ–Ω—ã–π —Å—Ç–∞—Ç—É—Å –±–µ–∑ –æ—à–∏–±–æ–∫

2. **Health Check:** `https://your-domain.railway.app/health`
   - –î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å: `{"status": "healthy", "service": "decision-bot"}`

3. **Telegram:** 
   - `/start` ‚Üí –¥–æ–ª–∂–µ–Ω –æ—Ç–≤–µ—Ç–∏—Ç—å –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ–º
   - `–ü–∏—Ü—Ü–∞ –∏–ª–∏ —Å—É—à–∏?` ‚Üí –¥–æ–ª–∂–µ–Ω –¥–∞—Ç—å —Å–æ–≤–µ—Ç

## üîÑ –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤

### –ü—Ä–∞–≤–∏–ª–∞:
1. **–û–¥–Ω–∞ —Å—Ä–µ–¥–∞ = –æ–¥–∏–Ω —Ç–æ–∫–µ–Ω** - –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –æ–¥–∏–Ω BOT_TOKEN –≤ —Ä–∞–∑–Ω—ã—Ö –¥–µ–ø–ª–æ—è—Ö
2. **–û—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–µ—Ä–µ–¥ –¥–µ–ø–ª–æ–µ–º** - –¥–æ–∂–¥–∏—Ç–µ—Å—å –ø–æ–ª–Ω–æ–π –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ –¥–µ–ø–ª–æ—è
3. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤** - —É–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ —Å—Ç–∞—Ä—ã–π —ç–∫–∑–µ–º–ø–ª—è—Ä –ø–æ–ª–Ω–æ—Å—Ç—å—é –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω

### –ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ –ø–æ–≤—Ç–æ—Ä—è–µ—Ç—Å—è:
1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥—Ä—É–≥–∏–µ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã** - –≤–æ–∑–º–æ–∂–Ω–æ –±–æ—Ç –∑–∞–ø—É—â–µ–Ω –≤ Heroku/Vercel/–ª–æ–∫–∞–ª—å–Ω–æ
2. **–ü–µ—Ä–µ—Å–æ–∑–¥–∞–π—Ç–µ —Ç–æ–∫–µ–Ω** - —Å–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤–æ–≥–æ –±–æ—Ç–∞ —á–µ—Ä–µ–∑ @BotFather
3. **–û–±–Ω–æ–≤–∏—Ç–µ BOT_TOKEN** –≤ Railway Variables

## üÜò –†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

### –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤ Railway:
- **Deployments:** —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω –∞–∫—Ç–∏–≤–Ω—ã–π –¥–µ–ø–ª–æ–π
- **Variables:** BOT_TOKEN –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π
- **Settings:** –∞–≤—Ç–æ–¥–µ–ø–ª–æ–π –∏–∑ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –≤–µ—Ç–∫–∏ GitHub

### –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤ @BotFather:
1. `/mybots` ‚Üí –≤—ã–±–µ—Ä–∏—Ç–µ –≤–∞—à–µ–≥–æ –±–æ—Ç–∞  
2. **Bot Settings** ‚Üí —É–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ webhook –æ—Ç–∫–ª—é—á–µ–Ω
3. **API Token** ‚Üí –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –ø–µ—Ä–µ—Å–æ–∑–¥–∞–π—Ç–µ

---

üéØ **–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –±–æ—Ç –∑–∞—Ä–∞–±–æ—Ç–∞–µ—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ –±–µ–∑ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤!** 